{"version":3,"sources":["DrawCharcterScreen.js","DrawSpace.js","game.js","Player.js","scollDisable.js","TouchHandler.js","util.js","WorldScreen.js"],"names":["DrawCharacterScreen","THREE","Group","[object Object]","super","this","bind","createBinder","drawingSpace","DrawSpace","window","addEventListener","add","getMesh","parent","remove","dispose","onmousedown","onmouseup","onmousemove","undefined","e","mouseWorld","screenToWorld","pageX","pageY","inside","toArray","canvasMesh","geometry","vertices","map","v","disableScroll","startDrawing","x","y","draw","enableScroll","stopDrawing","game","playerBlob","createBlob","startGame","w","h","stage","createjs","Stage","document","createElement","canvas","width","height","texture","Texture","BoxGeometry","material","MeshBasicMaterial","transparent","drawing","Shape","addChild","pen","color","size","update","needsUpdate","active","moved","graphics","beginStroke","setStrokeStyle","moveTo","lineTo","Mesh","drawingMesh","position","set","scale","z","Promise","resolve","reject","toBlob","removeAllChildren","removeAllEventListeners","_eventListeners","scene","Game","touchHandler","TouchHandler","renderer","WebGLRenderer","setSize","innerWidth","innerHeight","body","appendChild","domElement","Scene","camera","PerspectiveCamera","lookAt","spotLight","SpotLight","dialogue","world","WorldScreen","player","addPlayer","submitCharacter","aspect","updateProjectionMatrix","targetZ","vec","Vector3","pos","unproject","sub","normalize","distance","copy","multiplyScalar","requestAnimationFrame","render","Player","id","name","textureBlob","playerId","image","Image","src","URL","createObjectURL","onload","mesh","keys","37","38","39","40","preventDefault","preventDefaultForScrollKeys","keyCode","supportsPassive","Object","defineProperty","get","wheelOpt","passive","wheelEvent","console","log","removeEventListener","lastTouches","Array","touches","forEach","dispatchEvent","MouseEvent","length","instance","a","p","blobFromBytes","bytes","Blob","buffer","type","point","vs","i","j","xi","yi","xj","yj","players"],"mappings":"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","file":"game.min.js","sourceRoot":"../src"}