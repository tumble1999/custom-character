{"version":3,"sources":["DrawCharcterScreen.js","DrawSpace.js","game.js","Player.js","scollDisable.js","TouchHandler.js","util.js","WorldScreen.js"],"names":["DrawCharacterScreen","THREE","Group","[object Object]","prompt","super","this","bind","createBinder","drawingSpace","DrawSpace","window","addEventListener","add","getMesh","parent","remove","dispose","removeEventListener","e","mouseWorld","screenToWorld","pageX","pageY","inside","toArray","canvasMesh","geometry","vertices","map","v","disableScroll","startDrawing","x","y","draw","enableScroll","stopDrawing","game","playerBlob","createBlob","startGame","w","h","stage","createjs","Stage","document","createElement","canvas","width","height","texture","Texture","BoxGeometry","material","MeshBasicMaterial","transparent","drawing","Shape","addChild","pen","color","size","update","needsUpdate","active","moved","graphics","beginStroke","setStrokeStyle","moveTo","lineTo","Mesh","drawingMesh","position","set","scale","z","Promise","resolve","reject","toBlob","removeAllChildren","removeAllEventListeners","_eventListeners","scene","Game","touchHandler","TouchHandler","renderer","WebGLRenderer","setSize","innerWidth","innerHeight","body","appendChild","domElement","Scene","camera","PerspectiveCamera","lookAt","spotLight","SpotLight","dialogue","world","WorldScreen","player","addPlayer","aspect","updateProjectionMatrix","targetZ","vec","Vector3","pos","unproject","sub","normalize","distance","copy","multiplyScalar","requestAnimationFrame","render","Player","id","name","textureBlob","playerId","image","Image","speed","src","URL","createObjectURL","onload","mesh","PlaneGeometry","destination","length","keys","37","38","39","40","preventDefault","preventDefaultForScrollKeys","keyCode","supportsPassive","Object","defineProperty","get","wheelOpt","passive","wheelEvent","lastTouches","Array","touches","forEach","onmousedown","dispatchEvent","MouseEvent","onmousemove","onmouseup","instance","a","p","blobFromBytes","bytes","Blob","buffer","type","point","vs","i","j","xi","yi","xj","yj","players","values"],"mappings":"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","file":"game.min.js","sourceRoot":"../src"}