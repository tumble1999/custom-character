{"version":3,"sources":["DrawCharcterScreen.js","DrawSpace.js","game.js","Player.js","util.js","WorldScreen.js"],"names":["DrawCharacterScreen","[object Object]","scene","this","bind","createBinder","drawingSpace","DrawSpace","window","ontouchstart","ontouchmove","ontouchcancel","ontouchend","onmousedown","onmouseup","onmousemove","add","createMesh","destroy","undefined","e","Array","touches","forEach","mouseDown","mouseMove","length","stopDrawing","mouseUp","mouseWorld","screenToWorld","pageX","pageY","startDrawing","x","y","draw","game","playerBlob","createBlob","startGame","w","h","stage","createjs","Stage","document","createElement","canvas","width","height","texture","THREE","Texture","geometry","BoxGeometry","material","MeshBasicMaterial","map","transparent","drawing","Shape","addChild","pen","color","size","update","needsUpdate","active","moved","graphics","beginStroke","setStrokeStyle","moveTo","lineTo","canvasMesh","Mesh","drawingMesh","position","set","scale","z","Promise","resolve","reject","toBlob","removeAllChildren","removeAllEventListeners","_eventListeners","remove","Game","renderer","WebGLRenderer","setSize","innerWidth","innerHeight","body","appendChild","domElement","Scene","camera","PerspectiveCamera","lookAt","onresize","spotLight","SpotLight","state","WorldScreen","addPlayer","submitCharacter","aspect","updateProjectionMatrix","targetZ","vec","Vector3","pos","unproject","sub","normalize","distance","copy","multiplyScalar","requestAnimationFrame","render","Player","id","name","textureBlob","image","Image","src","URL","createObjectURL","onload","mesh","instance","a","p","blobFromBytes","bytes","Blob","buffer","type","players"],"mappings":"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","file":"game.min.js","sourceRoot":"../src"}