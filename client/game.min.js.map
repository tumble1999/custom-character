{"version":3,"sources":["DrawCharcterScreen.js","DrawSpace.js","game.js","Player.js","scollDisable.js","TouchHandler.js","util.js","WorldScreen.js"],"names":["DrawCharacterScreen","[object Object]","scene","this","bind","createBinder","drawingSpace","DrawSpace","window","addEventListener","add","createMesh","destroy","onmousedown","onmouseup","onmousemove","undefined","e","mouseWorld","screenToWorld","pageX","pageY","inside","toArray","game","state","canvasMesh","geometry","vertices","map","v","disableScroll","startDrawing","x","y","draw","enableScroll","stopDrawing","playerBlob","createBlob","startGame","w","h","stage","createjs","Stage","document","createElement","canvas","width","height","texture","THREE","Texture","BoxGeometry","material","MeshBasicMaterial","transparent","drawing","Shape","addChild","pen","color","size","update","needsUpdate","active","moved","graphics","beginStroke","setStrokeStyle","moveTo","lineTo","Mesh","drawingMesh","position","set","scale","z","Promise","resolve","reject","toBlob","removeAllChildren","removeAllEventListeners","_eventListeners","remove","Game","touchHandler","TouchHandler","renderer","WebGLRenderer","setSize","innerWidth","innerHeight","body","appendChild","domElement","Scene","camera","PerspectiveCamera","lookAt","spotLight","SpotLight","WorldScreen","addPlayer","submitCharacter","aspect","updateProjectionMatrix","targetZ","vec","Vector3","pos","unproject","sub","normalize","distance","copy","multiplyScalar","requestAnimationFrame","render","Player","id","name","textureBlob","image","Image","src","URL","createObjectURL","onload","mesh","keys","37","38","39","40","preventDefault","preventDefaultForScrollKeys","keyCode","supportsPassive","Object","defineProperty","get","wheelOpt","passive","wheelEvent","console","log","removeEventListener","lastTouches","Array","touches","forEach","dispatchEvent","MouseEvent","length","instance","a","p","blobFromBytes","bytes","Blob","buffer","type","point","vs","i","j","xi","yi","xj","yj","players"],"mappings":"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","file":"game.min.js","sourceRoot":"../src"}