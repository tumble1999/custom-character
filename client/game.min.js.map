{"version":3,"sources":["App.js","Button.js","DrawCharcterScreen.js","DrawSpace.js","game.js","PIXISettings.js","Player.js","Prefabs.js","scrollDisable.js","TouchHandler.js","util.js","World.js"],"names":["App","PIXI","Application","[object Object]","w","h","bg","super","width","height","backgroundColor","resolution","window","devicePixelRatio","this","view","thing","stage","addChild","cb","ticker","add","Button","Container","text","action","color","box","Sprite","from","Texture","WHITE","tint","GameColors","Text","fill","white","x","y","margin","buttonMode","interactive","on","event","console","log","hitArea","Rectangle","DrawCharacterScreen","prompt","bind","createBinder","drawingSpace","DrawSpace","o","destroy","e","startDrawing","pageX","pageY","draw","enableScroll","stopDrawing","createjs","Stage","document","createElement","canvas","background","sprite","drawing","Shape","pen","size","update","active","moved","graphics","beginStroke","setStrokeStyle","moveTo","lineTo","texture","Promise","resolve","reject","toBlob","removeAllChildren","removeAllEventListeners","_eventListeners","Game","touchHandler","TouchHandler","app","innerWidth","innerHeight","body","appendChild","domElement","onUpdate","addEventListener","buttons","button1","button2","screen","dialogue","playerBlob","createBlob","children","world","World","player","addPlayer","dt","mouseDown","mouseMove","mouseUp","settings","SCALE_MODE","SCALE_MODES","NEAREST","Player","id","name","textureBlob","URL","createObjectURL","playerId","speed","destination","pos","moveTowards","red","orange","yellow","line","green","springGreen","cyan","azure","blue","violet","magenta","rose","grey","black","keys","37","38","39","40","preventDefault","preventDefaultForScrollKeys","keyCode","supportsPassive","Object","defineProperty","get","wheelOpt","passive","wheelEvent","disableScroll","removeEventListener","lastTouches","Array","touches","forEach","onmousedown","dispatchEvent","MouseEvent","onmousemove","length","onmouseup","instance","a","p","blobFromBytes","bytes","Blob","buffer","type","lerpXY","b","t","vec","values","mag2","reduce","i","mag","Math","sqrt","norm","map","subVec","addVec","multVec","divVec","current","target","dx","dy","atan2","n","players","game"],"mappings":"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","file":"game.min.js","sourceRoot":"../src"}