{"version":3,"sources":["App.js","Button.js","DrawCharcterScreen.js","DrawSpace.js","Game.js","PIXISettings.js","Player.js","Prefabs.js","scrollDisable.js","Text.js","TouchHandler.js","Util.js","World.js"],"names":["App","PIXI","Application","[object Object]","w","h","bg","super","width","height","backgroundColor","resolution","window","devicePixelRatio","this","view","thing","stage","addChild","cb","ticker","add","Button","Container","text","action","color","margin","box","Sprite","from","Texture","WHITE","tint","GameColors","Text","fill","white","x","y","buttonMode","interactive","on","hitArea","Rectangle","DrawCharacterScreen","prompt","bind","createBinder","drawingSpace","DrawSpace","centerTo","game","getScreen","innerHeight","title","BorderText","fontSize","submit","dt","update","o","destroy","e","startDrawing","localisePos","pageX","pageY","draw","enableScroll","stopDrawing","createjs","Stage","document","createElement","canvas","background","sprite","drawing","Shape","pen","size","active","moved","graphics","beginStroke","setStrokeStyle","moveTo","lineTo","texture","Promise","resolve","reject","toBlob","innerWidth","removeAllChildren","removeAllEventListeners","_eventListeners","Game","touchHandler","TouchHandler","app","body","appendChild","domElement","onUpdate","addEventListener","dialogue","playerBlob","createBlob","children","world","World","player","addPlayer","screen","mouseDown","mouseMove","mouseUp","resizeTo","resize","settings","SCALE_MODE","SCALE_MODES","NEAREST","Player","id","name","textureBlob","URL","createObjectURL","playerId","speed","destination","nicknameSprite","pos","moveTowards","red","orange","yellow","lime","green","springGreen","cyan","azure","blue","violet","magenta","rose","grey","black","keys","37","38","39","40","preventDefault","preventDefaultForScrollKeys","keyCode","supportsPassive","Object","defineProperty","get","wheelOpt","passive","wheelEvent","disableScroll","removeEventListener","options","assign","stroke","strokeThickness","lastTouches","Array","touches","forEach","onmousedown","dispatchEvent","MouseEvent","onmousemove","length","onmouseup","instance","a","p","blobFromBytes","bytes","Blob","buffer","type","b","lerpXY","t","vec","values","mag2","reduce","i","mag","Math","sqrt","norm","map","subVec","addVec","multVec","divVec","current","target","dx","dy","atan2","n","players"],"mappings":"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","file":"game.min.js","sourceRoot":"../src"}