{"version":3,"sources":["DrawCharcterScreen.js","DrawSpace.js","game.js","Player.js","scollDisable.js","util.js","WorldScreen.js"],"names":["DrawCharacterScreen","[object Object]","scene","this","bind","createBinder","drawingSpace","DrawSpace","window","addEventListener","add","createMesh","destroy","ontouchstart","ontouchmove","ontouchcancel","onmousedown","onmouseup","onmousemove","undefined","e","Array","touches","forEach","length","enableScroll","stopDrawing","mouseWorld","screenToWorld","pageX","pageY","inside","toArray","game","state","canvasMesh","geometry","vertices","map","v","disableScroll","startDrawing","x","y","draw","playerBlob","createBlob","startGame","w","h","stage","createjs","Stage","document","createElement","canvas","width","height","texture","THREE","Texture","BoxGeometry","material","MeshBasicMaterial","transparent","drawing","Shape","addChild","pen","color","size","update","needsUpdate","active","moved","graphics","beginStroke","setStrokeStyle","moveTo","lineTo","Mesh","drawingMesh","position","set","scale","z","Promise","resolve","reject","toBlob","removeAllChildren","removeAllEventListeners","_eventListeners","remove","Game","renderer","WebGLRenderer","setSize","innerWidth","innerHeight","body","appendChild","domElement","Scene","camera","PerspectiveCamera","lookAt","spotLight","SpotLight","WorldScreen","addPlayer","submitCharacter","aspect","updateProjectionMatrix","targetZ","vec","Vector3","pos","unproject","sub","normalize","distance","copy","multiplyScalar","requestAnimationFrame","render","Player","id","name","textureBlob","image","Image","src","URL","createObjectURL","onload","mesh","keys","37","38","39","40","preventDefault","preventDefaultForScrollKeys","keyCode","supportsPassive","Object","defineProperty","get","wheelOpt","passive","wheelEvent","console","log","removeEventListener","instance","a","p","blobFromBytes","bytes","Blob","buffer","type","point","vs","i","j","xi","yi","xj","yj","players"],"mappings":"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","file":"game.min.js","sourceRoot":"../src"}